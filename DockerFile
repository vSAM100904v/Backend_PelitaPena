# 1. Base image Golang
FROM golang:1.20-alpine

# 2. Set working dir
WORKDIR /app

# 3. Copy go.mod & go.sum, lalu download dependencies
COPY go.mod go.sum ./
RUN go mod download

# 4. Copy seluruh source code
COPY . .

# 5. Build binary dengan nama "server"
RUN go build -o server .

# 6. Expose port (harus sesuai PORT Railway, default 8080)
EXPOSE 8080

# 7. Perintah jalankan aplikasi
CMD ["./server"]
